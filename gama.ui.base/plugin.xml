<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.splashHandlers">
      <splashHandler
            class="gama.ui.base.startup.Splash"
            id="gama.splash">
      </splashHandler>
      <splashHandlerProductBinding
            productId="gama.core.application.product"
            splashId="gama.splash">
      </splashHandlerProductBinding>
   </extension>
   <extension
         point="org.eclipse.ui.ide.projectNatureImages">
      <image
            icon="platform:/plugin/gama.ui.base/icons/navigator/folder.model3.png"
            id="gama.core.application.gamaNature.img"
            natureId="gama.core.application.gamaNature">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.activities">
      <activity
            description="Disable unwanted eclipse UI"
            id="disabled"
            name="Disable Unwanted UI">
      </activity>
      <activity
            id="disabled3"
            name="Disable P2 activity">
      </activity>
      
            <activityPatternBinding
            activityId="disabled2"
            pattern=".*/.*Nature">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="disabled"
            isEqualityPattern="false"
            pattern="gama.core.application/gama.core.application.perspectives..*">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="disabled"
            pattern="org.eclipse.*navigator.*/.*">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="disabled"
            pattern="org.eclipse.*compare.*/.*">
      </activityPatternBinding>
      <activityPatternBinding
            activityId="disabled"
            pattern="org.eclipse.*team.*/.*">
      </activityPatternBinding>
      <activity
            id="disabled2"
            name="Disable XText activity">
      </activity>
      <activityPatternBinding
            activityId="disabled3"
            pattern=".*/.*restartWorkbench">
      </activityPatternBinding>
   </extension>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="gama.category"
            name="Gama">
      </category>
            <view
            allowMultiple="false"
            category="gama.category"
            class="gama.ui.base.views.InteractiveConsoleView"
            icon="/icons/view.interactive2.png"
            id="gama.view.InteractiveConsoleView"
            name="Interactive console"
            restorable="true">
      </view>
            <view
                  allowMultiple="false"
                  category="gama.category"
                  class="gama.ui.base.views.TestView"
                  icon="/icons/view.test2.png"
                  id="gama.view.TestView"
                  name="Tests"
                  restorable="false">
            </view>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="gama.category"
            defaultHandler="gama.ui.base.commands.OpenGamaWebsiteHandler"
            id="gama.command.web"
            name="Welcome page">
      </command>
      <commandParameterType
            id="gama.type.String"
            type="java.lang.String">
      </commandParameterType>
      <category
            id="gama.category"
            name="GAMA Commands">
      </category>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="org.eclipse.ui.edit.copy"
            icon="platform:/plugin/gama.ui.base/icons/menu.copy2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.cut"
            icon="platform:/plugin/gama.ui.base/icons/menu.cut2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.delete"
            icon="platform:/plugin/gama.ui.base/icons/menu.delete2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.paste"
            icon="platform:/plugin/gama.ui.base/icons/menu.paste2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.print"
            icon="platform:/plugin/gama.ui.base/icons/menu.print2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.undo"
            icon="platform:/plugin/gama.ui.base/icons/menu.undo2.png">
      </image>
      <image
            commandId="org.eclipse.ui.edit.redo"
            icon="platform:/plugin/gama.ui.base/icons/menu.redo2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.save"
            icon="platform:/plugin/gama.ui.base/icons/menu.save2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.saveAll"
            icon="platform:/plugin/gama.ui.base/icons/menu.saveall2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.saveAs"
            icon="platform:/plugin/gama.ui.base/icons/menu.saveas2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.refresh"
            icon="platform:/plugin/gama.ui.base/icons/navigator/navigator.refresh2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.export"
            icon="platform:/plugin/gama.ui.base/icons/menu.export2.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.import"
            icon="platform:/plugin/gama.ui.base/icons/menu.import2.png">
      </image>
      <image
            commandId="org.eclipse.ui.navigate.collapseAll"
            icon="platform:/plugin/gama.ui.base/icons/navigator/navigator.collapse2.png">
      </image>
      <image
            commandId="org.eclipse.ui.window.preferences"
            icon="platform:/plugin/gama.ui.base/icons/menu.open.preferences2.png">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="*">
         <hiddenMenuItem
               id="org.eclipse.ui.project.buildAll">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.pde.ui.junitWorkbenchShortcut.debug">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.pde.ui.junitWorkbenchShortcut.run">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.externaltools.ExternalToolMenuDelegateToolbar">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.externalTools.commands.OpenExternalToolsConfigurations">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.navigate.addToWorkingSet">
         </hiddenMenuItem>
         <hiddenMenuItem
               id="org.eclipse.ui.navigate.removeFromWorkingSet">
         </hiddenMenuItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.back">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.forward">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.up">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.next">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.backwardHistory">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.forwardHistory">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.navigate.previous">
         </hiddenToolBarItem>
         <hiddenToolBarItem
               id="org.eclipse.ui.edit.text.gotoPreviousAnnotation">
         </hiddenToolBarItem>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar">
         <toolbar
               id="gama.toolbar"
               label="Common">
            <command
                  commandId="gama.command.goto.modeling"
                  icon="platform:/plugin/gama.ui.base/icons/perspective.modeling2.png"
                  label="Modeling perspective"
                  style="push"
                  tooltip="Open modeling perspective">
               <visibleWhen
                     checkEnabled="false">
                  <not>
                     <reference
                           definitionId="isInModelingPerspective">
                     </reference>
                  </not>
               </visibleWhen>
            </command>
            <separator
                  name="additions"
                  visible="false">
            </separator>
         </toolbar>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:file?after=open.ext">
         <command
               commandId="gama.command.switch"
               icon="platform:/plugin/gama.ui.base/icons/menu.switch2.png"
               label="Switch workspace..."
               style="push">
         </command>
         <command
               commandId="gama.command.restart"
               icon="platform:/plugin/gama.ui.base/icons/menu.restart2.png"
               label="Restart GAMA"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="menu:help?after=group.about.ext">
         <separator
               name="gama.sep.4"
               visible="true">
         </separator>
         <command
               commandId="gama.command.update"
               icon="platform:/plugin/gama.ui.base/icons/menu.update2.png"
               label="Check for updates"
               style="push">
         </command>
         <command
               commandId="gama.command.install"
               icon="platform:/plugin/gama.ui.base/icons/menu.install2.png"
               label="Install new plugins..."
               style="push">
         </command>
         <command 
               commandId="gama.command.details"
               icon="platform:/plugin/gama.ui.base/icons/menu.details2.png"
               label="Installation details"
               style="push">
         </command>
         <separator
               name="gama.sep.3"
               visible="true">
         </separator>
         <command
               commandId="gama.command.web"
               icon="platform:/plugin/gama.ui.base/icons/menu.open.web2.png"
               label="Welcome page"
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension  point="org.eclipse.ui.commands">
      
      <command
            categoryId="gama.category"
            defaultHandler="gama.ui.base.commands.DetailsHandler"
            id="gama.command.details"
            name="Installation details">
      </command>
      <command
            categoryId="gama.category"
            defaultHandler="gama.ui.base.commands.SwitchWorkspaceHandler"
            id="gama.command.switch"
            name="Switch Workspace">
     </command>
      <command
            categoryId="gama.category"
            defaultHandler="gama.ui.base.commands.InstallHandler"
            id="gama.command.install"
            name="Install new plugins...">
      </command>
      <command
            categoryId="gama.category"
            defaultHandler="gama.ui.base.commands.UpdateHandler"
            id="gama.command.update"
            name="Check for updates">
      </command>
      <command
            categoryId="gama.category"
            defaultHandler="gama.ui.base.commands.RestartHandler"
            id="gama.command.restart"
            name="Restart GAMA">
      </command>
   </extension>
      <extension
         point="org.eclipse.ui.handlers">
               <handler
            class="gama.ui.base.commands.PreferencesHandler"
            commandId="org.eclipse.ui.window.preferences">
         <activeWhen>
            <or>
               <reference
                     definitionId="isInModelingPerspective">
               </reference>
               <reference
                     definitionId="isInSimulationPerspective">
               </reference>
            </or>
         </activeWhen>
      </handler>
   </extension>
   <extension point="org.eclipse.ui.services">
      <serviceFactory
            factoryClass="gama.ui.base.shared.WebHelperFactory">
         <service
               serviceClass="gama.ui.base.interfaces.IWebHelper">
         </service>
      </serviceFactory>
      <serviceFactory
            factoryClass="gama.ui.base.shared.IconProviderFactory">
         <service
               serviceClass="gama.ui.base.interfaces.IIconProvider"></service>
      </serviceFactory>
      <serviceFactory
            factoryClass="gama.ui.base.shared.PreferenceHelperFactory">
         <service
               serviceClass="gama.ui.base.interfaces.IPreferenceHelper">
         </service>
      </serviceFactory>
   </extension>
   <extension
         point="gama.ui.provider">
      <implementation
            class="gama.ui.base.shared.ApplicationUIControlFactory"
            keyword="ui">
      </implementation>
   </extension>

</plugin>
